#import autosub
#import urllib2
#from library.beautifulsoup import BeautifulStoneSoup
#import HTMLParser
#import sys
#import os
#import time
#from autosub.version import autosubversion

#include $os.path.join($autosub.PATH.encode(), "interface/templates/header.tmpl")

        <div class="page-header"><h1>Live Information</h1></div>
		
		<div class="well well-small" align="center"><font size="3"><b>Changelog</b></font></div>
		<div class="well well-small">
		
		#try:
		#set $api = API('http://donnyvanosch-bootstrapbill.googlecode.com/hg/changelog.xml', RSS=True)
		$api.connect()
		#set $page = $BeautifulStoneSoup(api.resp)
		#set $result = $page.findAll("release") 
		#set $counter = 0

		<table cellpadding="0" cellspacing="0" border="0" width="100%">
		#for x in $result:
			#set $soupx = $BeautifulStoneSoup(str(x))
			#set $version = $soupx.find('version').string
			#set $releasedate = $soupx.find('releasedate').text
			#set $changelog = $soupx.find('changelog').string
			<tr>
				<td width="140px"><b>Version</b></td>
				<td><b>$version</b></td>
			</tr>
			<tr>
				<td width="140px"><b>Releasedate</b></td>
				<td>$releasedate</td>
			</tr>
			<tr>
				<td width="140px"><b>Changelog</b></td>
				<td>$HTMLParser.HTMLParser().unescape($changelog)</td>
			</tr>
			<tr>
				<td colspan="2">&nbsp;</td>
			</tr>
			#set $counter = $counter + 1
			
			#if $counter >= 3
				#break
			#end if
		#end for
		</table>
		#except:
		Feed cannot be found right now, please try again later.
		#end try:
		
		</div>
		
#include $os.path.join($autosub.PATH.encode(), "interface/templates/footer.tmpl")
